<div [formGroup]="form">
    <app-label labelBehavior [control]="control"></app-label>
    <p-autocomplete [suggestions]="filteredOptions" (completeMethod)="filter($event)"
                    [optionLabel]="control.option_label" [formControlName]="control.key!" [placeholder]="control.placeholder || control.label"
                    class="w-full md:w-80">
        @if( filteredOptions.length === 0 ) {
            <ng-template #footer>
                <div class="px-3 py-3">
                    <p-button (click)="addOption()" label="Add" fluid severity="secondary" styleClass="add" text size="small" icon="pi pi-plus" />
                </div>
            </ng-template>
        }
    </p-autocomplete>
    <app-error-control [control]="control"></app-error-control>
    @if (control.help_text && formContext.valid) {
        <small id="username-help">{{ control.help_text }}</small>
    }
</div>
